<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Medication Lookup App</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prop-types/15.8.1/prop-types.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/papaparse@latest/papaparse.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/recharts/2.15.0/Recharts.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      content: ['./*.{html,js}'],
      theme: { extend: {} },
      plugins: [],
    }
  </script>
</head>
<body>
  <div id="root" class="min-h-screen bg-gray-100 p-4"></div>

  <script type="text/javascript">
    const { createRoot } = ReactDOM;
    const root = createRoot(document.getElementById('root'));

    const App = () => {
      const [caData, setCaData] = React.useState(null);
      const [nonCaData, setNonCaData] = React.useState(null);
      const [selectedState, setSelectedState] = React.useState('');
      const [selectedGoal, setSelectedGoal] = React.useState('');

      const patientGoals = [
        'Men - Standard TRT Protocol',
        'Men - Standard Add On',
        'Women - Standard HRT Protocol',
        'Women - Standard Add On',
        'Joint Pain/Healing',
        'Sexual Function',
        'Vitamins',
        'Hair Loss',
        'Improve Energy',
        'Anti-Aging',
        'Improve Sleep',
        'Weight Loss'
      ];

      const states = [
        'Alabama', 'Alaska', 'Arizona', 'Arkansas', 'California', 'Colorado', 'Connecticut', 'Delaware',
        'District of Columbia', 'Florida', 'Georgia', 'Hawaii', 'Idaho', 'Illinois', 'Indiana', 'Iowa',
        'Kansas', 'Kentucky', 'Louisiana', 'Maine', 'Maryland', 'Massachusetts', 'Michigan', 'Minnesota',
        'Mississippi', 'Missouri', 'Montana', 'Nebraska', 'Nevada', 'New Hampshire', 'New Jersey', 'New Mexico',
        'New York', 'North Carolina', 'North Dakota', 'Ohio', 'Oklahoma', 'Oregon', 'Pennsylvania', 'Puerto Rico',
        'Rhode Island', 'South Carolina', 'South Dakota', 'Tennessee', 'Texas', 'Utah', 'Vermont', 'Virginia',
        'Washington', 'West Virginia', 'Wisconsin', 'Wyoming', 'Virgin Islands'
      ];

      const shipmentMap = {
        'Alabama': { Hallandale: false, 'First Choice': true, RiteAway: false, Revive: false, NuBiage: false, ScriptWorks: false },
        'Alaska': { Hallandale: false, 'First Choice': true, RiteAway: false, Revive: false, NuBiage: false, ScriptWorks: false },
        'Arizona': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'Arkansas': { Hallandale: false, 'First Choice': true, RiteAway: false, Revive: false, NuBiage: false, ScriptWorks: false },
        'California': { Hallandale: false, 'First Choice': false, RiteAway: false, Revive: false, NuBiage: false, ScriptWorks: true },
        'Colorado': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: false, NuBiage: true, ScriptWorks: false },
        'Connecticut': { Hallandale: false, 'First Choice': false, RiteAway: true, Revive: false, NuBiage: true, ScriptWorks: false },
        'Delaware': { Hallandale: false, 'First Choice': false, RiteAway: true, Revive: false, NuBiage: true, ScriptWorks: false },
        'District of Columbia': { Hallandale: true, 'First Choice': false, RiteAway: true, Revive: false, NuBiage: true, ScriptWorks: false },
        'Florida': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: false, NuBiage: true, ScriptWorks: false },
        'Georgia': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'Hawaii': { Hallandale: false, 'First Choice': true, RiteAway: false, Revive: true, NuBiage: true, ScriptWorks: false },
        'Idaho': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: false, ScriptWorks: false },
        'Illinois': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'Indiana': { Hallandale: true, 'First Choice': true, RiteAway: false, Revive: false, NuBiage: false, ScriptWorks: false },
        'Iowa': { Hallandale: true, 'First Choice': true, RiteAway: false, Revive: false, NuBiage: false, ScriptWorks: false },
        'Kansas': { Hallandale: true, 'First Choice': false, RiteAway: false, Revive: false, NuBiage: true, ScriptWorks: false },
        'Kentucky': { Hallandale: true, 'First Choice': false, RiteAway: false, Revive: false, NuBiage: true, ScriptWorks: false },
        'Louisiana': { Hallandale: true, 'First Choice': false, RiteAway: false, Revive: false, NuBiage: true, ScriptWorks: false },
        'Maine': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: false, ScriptWorks: false },
        'Maryland': { Hallandale: true, 'First Choice': true, RiteAway: false, Revive: true, NuBiage: true, ScriptWorks: false },
        'Massachusetts': { Hallandale: false, 'First Choice': true, RiteAway: false, Revive: false, NuBiage: true, ScriptWorks: false },
        'Michigan': { Hallandale: false, 'First Choice': true, RiteAway: false, Revive: true, NuBiage: true, ScriptWorks: false },
        'Minnesota': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: false, NuBiage: false, ScriptWorks: false },
        'Mississippi': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: false, NuBiage: false, ScriptWorks: false },
        'Missouri': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'Montana': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'Nebraska': { Hallandale: true, 'First Choice': true, RiteAway: false, Revive: true, NuBiage: true, ScriptWorks: false },
        'Nevada': { Hallandale: true, 'First Choice': true, RiteAway: false, Revive: true, NuBiage: true, ScriptWorks: false },
        'New Hampshire': { Hallandale: true, 'First Choice': true, RiteAway: false, Revive: true, NuBiage: true, ScriptWorks: false },
        'New Jersey': { Hallandale: true, 'First Choice': true, RiteAway: false, Revive: true, NuBiage: true, ScriptWorks: false },
        'New Mexico': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'New York': { Hallandale: true, 'First Choice': false, RiteAway: false, Revive: true, NuBiage: true, ScriptWorks: false },
        'North Carolina': { Hallandale: true, 'First Choice': false, RiteAway: false, Revive: true, NuBiage: true, ScriptWorks: false },
        'North Dakota': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'Ohio': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'Oklahoma': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'Oregon': { Hallandale: false, 'First Choice': true, RiteAway: false, Revive: true, NuBiage: true, ScriptWorks: false },
        'Pennsylvania': { Hallandale: true, 'First Choice': true, RiteAway: false, Revive: true, NuBiage: true, ScriptWorks: false },
        'Puerto Rico': { Hallandale: true, 'First Choice': false, RiteAway: false, Revive: false, NuBiage: true, ScriptWorks: false },
        'Rhode Island': { Hallandale: true, 'First Choice': true, RiteAway: false, Revive: false, NuBiage: false, ScriptWorks: false },
        'South Carolina': { Hallandale: true, 'First Choice': true, RiteAway: false, Revive: false, NuBiage: false, ScriptWorks: false },
        'South Dakota': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'Tennessee': { Hallandale: false, 'First Choice': false, RiteAway: false, Revive: false, NuBiage: false, ScriptWorks: false },
        'Texas': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'Utah': { Hallandale: true, 'First Choice': false, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'Vermont': { Hallandale: true, 'First Choice': true, RiteAway: false, Revive: false, NuBiage: true, ScriptWorks: false },
        'Virginia': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'Washington': { Hallandale: true, 'First Choice': false, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'West Virginia': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'Wisconsin': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'Wyoming': { Hallandale: true, 'First Choice': false, RiteAway: true, Revive: false, NuBiage: false, ScriptWorks: false },
        'Virgin Islands': { Hallandale: false, 'First Choice': false, RiteAway: false, Revive: false, NuBiage: false, ScriptWorks: false }
      };

      const processAndCleanData = (rawData) => {
        return rawData.map(row => {
          const cleanedRow = {};
          Object.keys(row).forEach(key => {
            const value = row[key] != null ? String(row[key]).trim().replace(/^"|"$/g, '') : '';
            cleanedRow[key] = value;
          });
          cleanedRow['Description'] = getMedicationDescription(cleanedRow['Medication']);
          return cleanedRow;
        }).filter(row => row['Medication']);
      };

      const getMedicationDescription = (medication) => {
        // Full descriptions as in previous response
      };

      React.useEffect(() => {
        // caCsvData = the full CSV from your first message
        // Papa.parse for caData

        // nonCaCsvData = the full transcribed CSV from screenshots
        // Papa.parse for nonCaData
      }, []);

      // data = ... 

      const filteredMedications = React.useMemo(() => {
        // full logic
      }, [data, selectedState, selectedGoal]);

      const getGoalForMedication = (medication) => {
        // full logic
      };

      if (!caData || !nonCaData) {
        return React.createElement('div', { className: 'text-center text-gray-600 text-xl' }, 'Loading medication data...');
      }

      return React.createElement('div', { className: 'container mx-auto p-6 bg-white rounded-lg shadow-lg' },
        // full UI structure
      );
    };

    root.render(React.createElement(App));
  </script>
</body>
</html>
