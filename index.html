<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Medication Lookup App</title>
  <meta http-equiv="Content-Security-Policy" content="script-src &#x27;self&#x27; &#x27;unsafe-eval&#x27; https://cdnjs.cloudflare.com https://unpkg.com https://cdn.tailwindcss.com;">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prop-types/15.8.1/prop-types.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/papaparse@latest/papaparse.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/recharts/2.15.0/Recharts.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      content: ['./*.{html,js}'],
      theme: { extend: {} },
      plugins: [],
    }
  </script>
</head>
<body>
  <div id="root" class="min-h-screen bg-gray-100 p-4"></div>

  <script type="text/javascript">
    const { createRoot } = ReactDOM;
    const root = createRoot(document.getElementById('root'));

    const App = () => {
      const [caData, setCaData] = React.useState(null);
      const [nonCaData, setNonCaData] = React.useState(null);
      const [selectedState, setSelectedState] = React.useState('');
      const [selectedGoal, setSelectedGoal] = React.useState('');

      const patientGoals = [
        'Men - Standard TRT Protocol',
        'Men - Standard Add On',
        'Women - Standard HRT Protocol',
        'Women - Standard Add On',
        'Joint Pain/Healing',
        'Sexual Function',
        'Vitamins',
        'Hair Loss',
        'Improve Energy',
        'Anti-Aging',
        'Improve Sleep',
        'Weight Loss'
      ];

      const states = [
        'Alabama', 'Alaska', 'Arizona', 'Arkansas', 'California', 'Colorado', 'Connecticut', 'Delaware',
        'District of Columbia', 'Florida', 'Georgia', 'Hawaii', 'Idaho', 'Illinois', 'Indiana', 'Iowa',
        'Kansas', 'Kentucky', 'Louisiana', 'Maine', 'Maryland', 'Massachusetts', 'Michigan', 'Minnesota',
        'Mississippi', 'Missouri', 'Montana', 'Nebraska', 'Nevada', 'New Hampshire', 'New Jersey', 'New Mexico',
        'New York', 'North Carolina', 'North Dakota', 'Ohio', 'Oklahoma', 'Oregon', 'Pennsylvania', 'Puerto Rico',
        'Rhode Island', 'South Carolina', 'South Dakota', 'Tennessee', 'Texas', 'Utah', 'Vermont', 'Virginia',
        'Washington', 'West Virginia', 'Wisconsin', 'Wyoming', 'Virgin Islands'
      ];

      const shipmentMap = {
        'Alabama': { Hallandale: false, 'First Choice': true, RiteAway: false, Revive: false, NuBiage: false, ScriptWorks: false },
        'Alaska': { Hallandale: false, 'First Choice': true, RiteAway: false, Revive: false, NuBiage: false, ScriptWorks: false },
        'Arizona': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'Arkansas': { Hallandale: false, 'First Choice': true, RiteAway: false, Revive: false, NuBiage: false, ScriptWorks: false },
        'California': { Hallandale: false, 'First Choice': false, RiteAway: false, Revive: false, NuBiage: false, ScriptWorks: true },
        'Colorado': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: false, NuBiage: true, ScriptWorks: false },
        'Connecticut': { Hallandale: false, 'First Choice': false, RiteAway: true, Revive: false, NuBiage: true, ScriptWorks: false },
        'Delaware': { Hallandale: false, 'First Choice': false, RiteAway: true, Revive: false, NuBiage: true, ScriptWorks: false },
        'District of Columbia': { Hallandale: true, 'First Choice': false, RiteAway: true, Revive: false, NuBiage: true, ScriptWorks: false },
        'Florida': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: false, NuBiage: true, ScriptWorks: false },
        'Georgia': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'Hawaii': { Hallandale: false, 'First Choice': true, RiteAway: false, Revive: true, NuBiage: true, ScriptWorks: false },
        'Idaho': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: false, ScriptWorks: false },
        'Illinois': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'Indiana': { Hallandale: true, 'First Choice': true, RiteAway: false, Revive: false, NuBiage: false, ScriptWorks: false },
        'Iowa': { Hallandale: true, 'First Choice': true, RiteAway: false, Revive: false, NuBiage: false, ScriptWorks: false },
        'Kansas': { Hallandale: true, 'First Choice': false, RiteAway: false, Revive: false, NuBiage: true, ScriptWorks: false },
        'Kentucky': { Hallandale: true, 'First Choice': false, RiteAway: false, Revive: false, NuBiage: true, ScriptWorks: false },
        'Louisiana': { Hallandale: true, 'First Choice': false, RiteAway: false, Revive: false, NuBiage: true, ScriptWorks: false },
        'Maine': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: false, ScriptWorks: false },
        'Maryland': { Hallandale: true, 'First Choice': true, RiteAway: false, Revive: true, NuBiage: true, ScriptWorks: false },
        'Massachusetts': { Hallandale: false, 'First Choice': true, RiteAway: false, Revive: false, NuBiage: true, ScriptWorks: false },
        'Michigan': { Hallandale: false, 'First Choice': true, RiteAway: false, Revive: true, NuBiage: true, ScriptWorks: false },
        'Minnesota': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: false, NuBiage: false, ScriptWorks: false },
        'Mississippi': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: false, NuBiage: false, ScriptWorks: false },
        'Missouri': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'Montana': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'Nebraska': { Hallandale: true, 'First Choice': true, RiteAway: false, Revive: true, NuBiage: true, ScriptWorks: false },
        'Nevada': { Hallandale: true, 'First Choice': true, RiteAway: false, Revive: true, NuBiage: true, ScriptWorks: false },
        'New Hampshire': { Hallandale: true, 'First Choice': true, RiteAway: false, Revive: true, NuBiage: true, ScriptWorks: false },
        'New Jersey': { Hallandale: true, 'First Choice': true, RiteAway: false, Revive: true, NuBiage: true, ScriptWorks: false },
        'New Mexico': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'New York': { Hallandale: true, 'First Choice': false, RiteAway: false, Revive: true, NuBiage: true, ScriptWorks: false },
        'North Carolina': { Hallandale: true, 'First Choice': false, RiteAway: false, Revive: true, NuBiage: true, ScriptWorks: false },
        'North Dakota': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'Ohio': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'Oklahoma': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'Oregon': { Hallandale: false, 'First Choice': true, RiteAway: false, Revive: true, NuBiage: true, ScriptWorks: false },
        'Pennsylvania': { Hallandale: true, 'First Choice': true, RiteAway: false, Revive: true, NuBiage: true, ScriptWorks: false },
        'Puerto Rico': { Hallandale: true, 'First Choice': false, RiteAway: false, Revive: false, NuBiage: true, ScriptWorks: false },
        'Rhode Island': { Hallandale: true, 'First Choice': true, RiteAway: false, Revive: false, NuBiage: false, ScriptWorks: false },
        'South Carolina': { Hallandale: true, 'First Choice': true, RiteAway: false, Revive: false, NuBiage: false, ScriptWorks: false },
        'South Dakota': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'Tennessee': { Hallandale: false, 'First Choice': false, RiteAway: false, Revive: false, NuBiage: false, ScriptWorks: false },
        'Texas': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'Utah': { Hallandale: true, 'First Choice': false, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'Vermont': { Hallandale: true, 'First Choice': true, RiteAway: false, Revive: false, NuBiage: true, ScriptWorks: false },
        'Virginia': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'Washington': { Hallandale: true, 'First Choice': false, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'West Virginia': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'Wisconsin': { Hallandale: true, 'First Choice': true, RiteAway: true, Revive: true, NuBiage: true, ScriptWorks: false },
        'Wyoming': { Hallandale: true, 'First Choice': false, RiteAway: true, Revive: false, NuBiage: false, ScriptWorks: false },
        'Virgin Islands': { Hallandale: false, 'First Choice': false, RiteAway: false, Revive: false, NuBiage: false, ScriptWorks: false }
      };

      const processAndCleanData = (rawData) => {
        return rawData.map(row => {
          const cleanedRow = {};
          Object.keys(row).forEach(key => {
            const value = row[key] != null ? String(row[key]).trim().replace(/^"|"$/g, '') : '';
            cleanedRow[key] = value;
          });
          cleanedRow['Description'] = getMedicationDescription(cleanedRow['Medication']);
          return cleanedRow;
        }).filter(row => row['Medication']);
      };

      const getMedicationDescription = (medication) => {
        const descriptions = {
          'Testosterone Cypionate': 'Used for TRT to treat low testosterone. Improves energy, muscle, libido. Side effects: acne, hair loss, mood changes.',
          'Anastrozole': 'Reduces estrogen in TRT patients. Prevents gynecomastia. Side effects: joint pain, hot flashes.',
          'Bi-Estrogen Cream': 'HRT for menopause symptoms like hot flashes. Side effects: weight gain, blurred vision, tiredness, acne.',
          'Progesterone': 'Supports hormonal balance in HRT. Improves sleep, mood. Side effects: abdominal pain, bloating, blurred vision, nausea.',
          'Clomiphene (Clomid)': 'Stimulates testosterone in men or ovulation in women. Side effects: hot flashes, headaches.',
          'Estrogen Patch': 'HRT for menopause. Reduces hot flashes, vaginal dryness. Side effects: bloating, breast tenderness, headaches, nausea.',
          'DHEA': 'Supports hormone production. May improve energy, mood. Side effects: oily skin, acne, hair loss, upset stomach.',
          'Pregnenolone': 'Precursor hormone for others. May aid memory, mood. Side effects: overstimulation, insomnia, irritability, acne, headache.',
          'Nandrolone Decanoate': 'For joint pain, muscle wasting. Relieves hypogonadal joint pain. Side effects: headaches, acne, diarrhea, edema.',
          'L Carnitine': 'Aids fat burning, energy. For healing, performance. Side effects: stomach upset, heartburn, diarrhea, seizures.',
          'Sermorelin': 'Stimulates growth hormone release. Anti-aging, energy. Side effects: injection site reactions, headache, flushing, nausea.',
          'CJC 1295/Ipamorelin': 'Boosts GH for muscle, fat loss. Side effects: headaches, flu-like symptoms, irritability, nausea.',
          'BPC Capsules': 'Promotes healing, wound repair. For tendons, ligaments. Side effects: unknown in humans, potential injection reactions.',
          'TB500 (Thymosin Beta 4)': 'Aids tissue repair, flexibility. Side effects: fatigue, headaches, dizziness, injection site irritation.',
          'Sildenafil (Viagra)': 'Treats ED by increasing blood flow. Side effects: headache, flushing, nausea, stuffy nose.',
          'Tadalafil (Cialis)': 'Treats ED, longer-lasting. Side effects: headache, flushing, back pain, nausea.',
          'PT 141 (Bremelanotide)': 'Boosts libido, arousal. Side effects: nausea (common), vomiting, flushing, headache.',
          'Oxytocin': 'Enhances bonding, may aid sexual function. Side effects: headache, nausea, vomiting, rapid heartbeat.',
          'Scream Cream': 'Topical for female arousal. Side effects: itching, redness, dryness, dizziness, headaches.',
          'Aminos-1MG': 'Amino acid blend for recovery. Side effects: nausea, abdominal pain, vomiting, diarrhea.',
          'DAC Amino L-Glutamine L-Arginine L-Carnitine': 'Supports recovery, energy. Side effects: stomach upset, diarrhea, bloating.',
          'Glutathione': 'Antioxidant for detox, skin. Side effects: rash (topical), nausea, abdominal cramps (injections).',
          'Lipo B': 'Fat-burning injection with B vitamins. Side effects: allergic reactions, anxiety, constipation, diarrhea.',
          'MIC B12/BioBoost': 'Weight loss blend with B12. Side effects: pain at site, nausea, vomiting, diarrhea.',
          'Vitamin B12 D': 'For energy, deficiency. Side effects: mild diarrhea, itching, swelling sensation.',
          'Lipo C': 'Lipotropic for fat loss. Side effects: pain/swelling at site, nausea, gastrointestinal issues.',
          'Finasteride / Minoxidil': 'For hair loss. Finasteride blocks DHT; Minoxidil promotes growth. Side effects: itching, scalp irritation, sexual dysfunction (finasteride).',
          'Metformin': 'Blood sugar control for weight loss. Side effects: nausea, diarrhea.',
          'Phentermine': 'Appetite suppressant. Side effects: dry mouth, insomnia
